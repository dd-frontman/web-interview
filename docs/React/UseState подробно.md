# –£—Ä–æ–∫ 2. –•—É–∫ `useState` ‚Äî –æ—Ç –æ—Å–Ω–æ–≤ –¥–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –Ω—é–∞–Ω—Å–æ–≤

## 1) –ö—Ä–∞—Ç–∫–æ, –ø–æ‚Äë–ø—Ä–æ—Å—Ç–æ–º—É

`useState` ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± —Ö—Ä–∞–Ω–∏—Ç—å –∏ –º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ React. –û–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–∞—Ä—É: **[value, setValue]**. –í—ã –≤—ã–∑—ã–≤–∞–µ—Ç–µ `setValue(newValue)` ‚Üí React —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ **–ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç**.

---

## 2) –ü–æ–¥—Ä–æ–±–Ω–æ —Å —Ç–µ–æ—Ä–∏–µ–π –∏ –≤–∞–∂–Ω—ã–º–∏ –Ω—é–∞–Ω—Å–∞–º–∏

### 2.1. –°–∏–≥–Ω–∞—Ç—É—Ä–∞ –∏ –ø—Ä–∞–≤–∏–ª–∞

- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–Ω–µ –≤ `if/for/while`, –Ω–µ –≤ –∫–æ–ª–±—ç–∫–∞—Ö —Ä–µ–Ω–¥–µ—Ä–∞).
  # ‚ùå –∏ ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –≤—ã–∑–æ–≤–∞ `useState`

#### 2.1.1) ‚ùå –ù–µ–ª—å–∑—è –≤–Ω—É—Ç—Ä–∏ `if`

```tsx
import { useState } from "react";

export function BadIf() {
	const isAdmin = true;

	if (isAdmin) {
		// ‚ùå –û—à–∏–±–∫–∞: —Ö—É–∫ –≤–Ω—É—Ç—Ä–∏ if
		const [count, setCount] = useState(0);
	}

	return <div>...</div>;
}
```

–ü–æ—á–µ–º—É –ø–ª–æ—Ö–æ: –ø–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–æ–≤ —Ö—É–∫–æ–≤ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –º–µ–∂–¥—É —Ä–µ–Ω–¥–µ—Ä–∞–º–∏.  
React –æ–∂–∏–¥–∞–µ—Ç, —á—Ç–æ **–∫–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä –≤—ã–∑—ã–≤–∞–µ—Ç —Ö—É–∫–∏ –≤ –æ–¥–Ω–æ–º –∏ —Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ**.

‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:

```tsx
import { useState } from "react";

export function GoodIf() {
	const [count, setCount] = useState(0); // –≤—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
	const isAdmin = true;

	return <div>{isAdmin && <p>Admin count: {count}</p>}</div>;
}
```

---

## 2) ‚ùå –ù–µ–ª—å–∑—è –≤ —Ü–∏–∫–ª–µ

```tsx
import { useState } from "react";

export function BadLoop() {
	const arr = [1, 2, 3];

	arr.forEach(() => {
		// ‚ùå –û—à–∏–±–∫–∞: —Ö—É–∫ –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞
		const [value, setValue] = useState(0);
	});

	return <div>...</div>;
}
```

‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç: —Å–¥–µ–ª–∞–π—Ç–µ –º–∞—Å—Å–∏–≤ –≤ state —Ü–µ–ª–∏–∫–æ–º.

```tsx
import { useState } from "react";

export function GoodLoop() {
	// –º–∞—Å—Å–∏–≤ —Ü–µ–ª–∏–∫–æ–º –≤ state
	const [values, setValues] = useState<number[]>([0, 0, 0]);

	const increment = (i: number) =>
		setValues((prev) => prev.map((v, idx) => (idx === i ? v + 1 : v)));

	return (
		<div>
			{values.map((v, i) => (
				<button key={i} onClick={() => increment(i)}>
					{v}
				</button>
			))}
		</div>
	);
}
```

---

## 3) ‚ùå –ù–µ–ª—å–∑—è –≤ –∫–æ–ª–±—ç–∫–µ —Ä–µ–Ω–¥–µ—Ä–∞

```tsx
import { useState } from "react";

export function BadRenderCallback() {
	const renderItem = () => {
		// ‚ùå –û—à–∏–±–∫–∞: —Ö—É–∫ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ
		const [clicked, setClicked] = useState(false);
		return <button onClick={() => setClicked(true)}>Click</button>;
	};

	return <div>{renderItem()}</div>;
}
```

‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç: –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç.

```tsx
import { useState } from "react";

function ItemButton() {
	const [clicked, setClicked] = useState(false);
	return <button onClick={() => setClicked(true)}>{clicked ? "Clicked!" : "Click"}</button>;
}

export function GoodRenderCallback() {
	return (
		<div>
			<ItemButton />
			<ItemButton />
		</div>
	);
}
```

---

## üìù –ò—Ç–æ–≥

- –í—Å–µ —Ö—É–∫–∏ (`useState`, `useEffect`, `useContext`, ‚Ä¶) **–≤—ã–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –≤ —Ç–µ–ª–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞** –∏–ª–∏ –≤ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ö—É–∫–∞—Ö.
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–∞ –∏—Ö –≤ `if`, `for`, `while`, –∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –≤—ã–∑—ã–≤–∞–µ–º—ã–µ –≤ —Ä–µ–Ω–¥–µ—Ä–µ.
- –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ª–æ–≥–∏–∫–∞ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º —É—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (`&&`, `?:`) –∏–ª–∏ –≤—ã–Ω–æ—Å–∏–º –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã/—Ö—É–∫–∏.

---

- –ù–∞ –æ–¥–∏–Ω –≤—ã–∑–æ–≤ `useState` ‚Äî –æ–¥–∏–Ω ¬´—è—á–µ–π–∫–∞¬ª —Å–æ—Å—Ç–æ—è–Ω–∏—è. –ü–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–æ–≤ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **—Å—Ç–∞–±–∏–ª—å–Ω—ã–º** –º–µ–∂–¥—É —Ä–µ–Ω–¥–µ—Ä–∞–º–∏.
- –°–æ—Å—Ç–æ—è–Ω–∏–µ **–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ –º–µ–∂–¥—É —Ä–µ–Ω–¥–µ—Ä–∞–º–∏** –∏ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ **—ç–∫–∑–µ–º–ø–ª—è—Ä—É** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
- `setState` **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç** –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ. –í —Ç–æ–º –∂–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –±–ª–æ–∫–µ –∫–æ–¥–∞ —É –≤–∞—Å –µ—â—ë –±—É–¥–µ—Ç **—Å—Ç–∞—Ä–æ–µ** –∑–Ω–∞—á–µ–Ω–∏–µ.
- –° React 18 –¥–µ–π—Å—Ç–≤—É–µ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –±–∞—Ç—á–∏—Ä–æ–≤–∞–Ω–∏–µ**: –Ω–µ—Å–∫–æ–ª—å–∫–æ `setState` –≤ –æ–¥–Ω–æ–º —Ç–∏–∫–µ (–¥–∞–∂–µ –≤ `setTimeout`/–ø—Ä–æ–º–∏—Å–∞—Ö) —Å—Ö–ª–æ–ø—ã–≤–∞—é—Ç—Å—è –≤ –æ–¥–∏–Ω —Ä–µ—Ä–µ–Ω–¥–µ—Ä.

### 2.2. –ó–Ω–∞—á–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

- –ú–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å **–ª—é–±–æ–π —Ç–∏–ø**: `number`, `string`, `boolean`, –æ–±—ä–µ–∫—Ç—ã, –º–∞—Å—Å–∏–≤—ã, —Ñ—É–Ω–∫—Ü–∏–∏.
- –î–ª—è **—Ç—è–∂—ë–ª–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ¬´–ª–µ–Ω–∏–≤—ã–π¬ª –≤–∞—Ä–∏–∞–Ω—Ç: `useState(() => computeHeavy())` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è **–æ–¥–∏–Ω —Ä–∞–∑** –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏.
- React —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –Ω–æ–≤–æ–µ –∏ —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ **`Object.is`**. –ï—Å–ª–∏ ¬´—Ä–∞–≤–Ω—ã¬ª ‚Üí —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞ –Ω–µ –±—É–¥–µ—Ç.

### 2.3. –ö–∞–∫ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

- –ï—Å–ª–∏ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ ‚Äî **–≤—Å–µ–≥–¥–∞** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–ø–¥–µ–π—Ç–µ—Ä**:
  ```ts
  setCount((prev) => prev + 1);
  ```
- **–ù–µ –º—É—Ç–∏—Ä—É–π—Ç–µ** –æ–±—ä–µ–∫—Ç—ã/–º–∞—Å—Å–∏–≤—ã –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏: —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ã–µ –∫–æ–ø–∏–∏ (–∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å).
- –†–∞–∑–¥–µ–ª—è–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ ¬´–º–µ–ª–∫–∏–µ¬ª –∫—É—Å–æ—á–∫–∏ ‚Äî —ç—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç –æ–±–ª–∞—Å—Ç—å –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–æ–∫.

### 2.4. –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

1. **¬´–°—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ setState¬ª**  
   ‚Äî –ù–æ—Ä–º–∞–ª—å–Ω–æ: —á—Ç–µ–Ω–∏–µ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ `setState` –¥–∞—Å—Ç **—Å—Ç–∞—Ä–æ–µ** –∑–Ω–∞—á–µ–Ω–∏–µ. –î–æ–∂–¥–∏—Ç–µ—Å—å —Ä–µ–Ω–¥–µ—Ä–∞ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `useEffect` –ø–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏) –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–ø–¥–µ–π—Ç–µ—Ä.

2. **¬´–°—á—ë—Ç—á–∏–∫ +1 —Ç—Ä–∏–∂–¥—ã, –∞ —É–≤–µ–ª–∏—á–∏–ª–æ—Å—å –æ–¥–∏–Ω —Ä–∞–∑¬ª**  
   ‚Äî –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –∫–ª–∏–∫–∞ —Ç—Ä–∏ `setCount(count + 1)` –≤–æ–∑—å–º—É—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ `count`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–ø–¥–µ–π—Ç–µ—Ä: —Ç—Ä–∏ —Ä–∞–∑–∞ `setCount(p => p + 1)`.

3. **¬´–°—Ç–∞ÃÅ–ª–∞—è –∑–∞–º—ã–∫–∞–Ω–∏—è (stale closure)¬ª**  
   ‚Äî –ö–æ–ª–±—ç–∫–∏ –≤ —Ç–∞–π–º–µ—Ä–∞—Ö/—ç—Ñ—Ñ–µ–∫—Ç–∞—Ö –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—Ç —É—Å—Ç–∞—Ä–µ–≤—à–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –õ–µ—á–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –∞–ø–¥–µ–π—Ç–µ—Ä–æ–º –∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ `useEffect`.

4. **¬´–ù–µ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞¬ª**  
   ‚Äî –í—ã –º—É—Ç–∏—Ä—É–µ—Ç–µ –æ–±—ä–µ–∫—Ç –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç–µ —Ç—É –∂–µ —Å—Å—ã–ª–∫—É: `user.name = 'A'; setUser(user)` ‚Äî –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è —Å—Å—ã–ª–∫–∞ ‚Üí –Ω–µ—Ç —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞. –î–µ–ª–∞–π—Ç–µ –∫–æ–ø–∏—é: `setUser(prev => ({ ...prev, name: 'A' }))`.

5. **¬´–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã / Too many re-renders¬ª**  
   ‚Äî –ù–µ–ª—å–∑—è –≤—ã–∑—ã–≤–∞—Ç—å `setState` **–≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∞** (–ø—Ä—è–º–æ –≤ —Ç–µ–ª–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞) –±–µ–∑ —É—Å–ª–æ–≤–∏–π –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞. –ü–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ –≤ `useEffect`/–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è.

6. **¬´State —Å–±—Ä–æ—Å–∏–ª—Å—è —Å–∞–º –ø–æ —Å–µ–±–µ¬ª**  
   ‚Äî –í—ã –ø–æ–º–µ–Ω—è–ª–∏ `key` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ‚Äî –¥–ª—è React —ç—Ç–æ **–Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä**, —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è. –ò–Ω–æ–≥–¥–∞ —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è ¬´–∂—ë—Å—Ç–∫–æ–≥–æ —Ä–µ—Å–µ—Ç–∞¬ª.

7. **¬´–ù—É–∂–Ω–æ —á—Ç–æ-—Ç–æ —Å–¥–µ–ª–∞—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è state¬ª**  
   ‚Äî –£ `setState` **–Ω–µ—Ç –∫–æ–ª–±—ç–∫–∞**, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `useEffect(() => { /* side-effect */ }, [value])`.

8. **¬´–ö–æ–ø–∏—Ä—É—é props –≤ state¬ª (–∞–Ω—Ç–∏‚Äë–ø–∞—Ç—Ç–µ—Ä–Ω)**  
   ‚Äî –ù–µ –Ω–∞–¥–æ, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ ¬´—Å–Ω–∏–º–æ–∫¬ª –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´—á–µ—Ä–Ω–æ–≤–∏–∫¬ª —Ñ–æ—Ä–º—ã). –ò–Ω–∞—á–µ –ø–æ–ª—É—á–∏—Ç–µ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω.

9. **–¢–∏–ø–∏–∑–∞—Ü–∏—è –≤ TS: `useState([])` ‚Üí `never[]`**  
   ‚Äî –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –±–µ–∑ —Ç–∏–ø–∞ –∏–Ω—Ñ–µ—Ä–∏—Ç—Å—è –∫–∞–∫ `never[]`. –Ø–≤–Ω–æ –∑–∞–¥–∞–≤–∞–π—Ç–µ —Ç–∏–ø: `useState<Item[]>([])`.

10. **–ì–æ–Ω–∫–∏ –∏ —É—Ç–µ—á–∫–∏ –ø—Ä–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö**  
    ‚Äî –ü—Ä–∏ –æ—Ç–≤–µ—Ç–µ –ø–æ—Å–ª–µ –∞–Ω–º–∞—É–Ω—Ç–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `setState` ‚Üí –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `AbortController`/—Ñ–ª–∞–≥ –æ—Ç–º–µ–Ω—ã/–æ–±—Ä–∞–±–æ—Ç–∫—É –∞–Ω–º–∞—É–Ω—Ç–∞ –≤ `useEffect` cleanup.

### 2.5. –ö–æ–≥–¥–∞ `useReducer` –ª—É—á—à–µ `useState`

- –°–ª–æ–∂–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è, –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–π, –∑–∞–≤–∏—Å—è—â–∏–µ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ –∞–ø–¥–µ–π—Ç—ã, –∞—É–¥–∏—Ç –ª–æ–≥–∏–∫–∏.
- `useState` ‚Äî –±—ã—Å—Ç—Ä–æ –∏ –ø—Ä–æ—Å—Ç–æ, `useReducer` ‚Äî —Ñ–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –ª–æ–≥–∏–∫—É (—Ä–µ–¥—å—é—Å–µ—Ä, —Ç–∏–ø—ã —ç–∫—à–µ–Ω–æ–≤).

---

## 3) –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã (React + TypeScript)

### 3.1. –ë–∞–∑–æ–≤—ã–π —Å—á—ë—Ç—á–∏–∫ + –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```tsx
import { useState } from "react";

export function Counter() {
	const [count, setCount] = useState<number>(0);

	// —Ç—Ä–∏ —Ä–∞–∑–∞ –ø–æ–¥—Ä—è–¥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç –Ω–∞ +3
	const inc3 = () => {
		setCount((p) => p + 1);
		setCount((p) => p + 1);
		setCount((p) => p + 1);
	};

	return (
		<div>
			<p>Count: {count}</p>
			<button onClick={() => setCount((p) => p + 1)}>+1</button>
			<button onClick={inc3}>+3 (batched)</button>
			<button onClick={() => setCount(0)}>Reset</button>
		</div>
	);
}
```

### 3.2. –û–±—ä–µ–∫—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏: –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```tsx
type User = { id: string; name: string; city?: string };

export function ProfileCard() {
	const [user, setUser] = useState<User>({ id: "u1", name: "Neo", city: "Seoul" });

	const rename = (name: string) => {
		// ‚ùå –ü–ª–æ—Ö–æ: user.name = name; setUser(user)
		// ‚úÖ –•–æ—Ä–æ—à–æ:
		setUser((prev) => ({ ...prev, name }));
	};

	return (
		<div>
			<p>
				{user.name} ‚Äî {user.city}
			</p>
			<button onClick={() => rename("Trinity")}>Rename</button>
		</div>
	);
}
```

### 3.3. –ú–∞—Å—Å–∏–≤: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ

```tsx
type Todo = { id: string; title: string; done: boolean };

export function Todos() {
	const [list, setList] = useState<Todo[]>([{ id: "1", title: "Learn useState", done: false }]);

	const add = (title: string) =>
		setList((prev) => [...prev, { id: crypto.randomUUID(), title, done: false }]);

	const toggle = (id: string) =>
		setList((prev) => prev.map((t) => (t.id === id ? { ...t, done: !t.done } : t)));

	const remove = (id: string) => setList((prev) => prev.filter((t) => t.id !== id));

	return (
		<div>
			<button onClick={() => add("New task")}>Add</button>
			<ul>
				{list.map((t) => (
					<li key={t.id}>
						<label>
							<input type="checkbox" checked={t.done} onChange={() => toggle(t.id)} />
							{t.title}
						</label>
						<button onClick={() => remove(t.id)}>√ó</button>
					</li>
				))}
			</ul>
		</div>
	);
}
```

### 3.4. –õ–µ–Ω–∏–≤—ã–π –∏–Ω–∏—Ç (–¥–æ—Ä–æ–≥–æ–π —Ä–∞—Å—á—ë—Ç –æ–¥–∏–Ω —Ä–∞–∑)

```tsx
function heavyCompute(): number {
	// –∏–º–∏—Ç–∞—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç–Ω–æ–π –ª–æ–≥–∏–∫–∏
	let sum = 0;
	for (let i = 0; i < 1_000_000; i++) sum += i;
	return sum;
}

export function Dashboard() {
	const [base, setBase] = useState<number>(() => heavyCompute()); // –≤—ã–∑–æ–≤–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
	const [mult, setMult] = useState<number>(1);

	return (
		<div>
			<p>Base: {base}</p>
			<p>Result: {base * mult}</p>
			<button onClick={() => setMult((p) => p + 1)}>√ó++</button>
			<button onClick={() => setBase(() => heavyCompute())}>Recompute</button>
		</div>
	);
}
```

### 3.5. –°—Ç–∞ÃÅ–ª–æ–µ –∑–∞–º—ã–∫–∞–Ω–∏–µ –∏ –µ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```tsx
export function Timer() {
	const [sec, setSec] = useState(0);

	// ‚ùå –ü–ª–æ—Ö–æ: –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç sec = 0 –Ω–∞–≤—Å–µ–≥–¥–∞
	// setTimeout(() => setSec(sec + 1), 1000);

	// ‚úÖ –•–æ—Ä–æ—à–æ: –æ–ø–∏—Ä–∞–µ–º—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
	const tick = () => setSec((p) => p + 1);

	React.useEffect(() => {
		const id = setInterval(tick, 1000);
		return () => clearInterval(id);
	}, []); // tick –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–ø–¥–µ–π—Ç–µ—Ä ‚Üí –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –Ω–µ –Ω—É–∂–Ω–∞

	return <p>Seconds: {sec}</p>;
}
```

### 3.6. Reset —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ—Ä–µ–∑ `key`

```tsx
export function SearchBox({ query }: { query: string }) {
	// –ø—Ä–∏ —Å–º–µ–Ω–µ key ‚Äî –Ω–æ–≤—ã–π –∏–Ω—Å—Ç–∞–Ω—Å InputWithState, state —Å–±—Ä–æ—Å–∏—Ç—Å—è
	return <InputWithState key={query} initial={query} />;
}

function InputWithState({ initial }: { initial: string }) {
	const [value, setValue] = useState(initial);
	return <input value={value} onChange={(e) => setValue(e.target.value)} />;
}
```

### 3.7. –¢–∏–ø–∏–∑–∞—Ü–∏—è —Ö–∏—Ç—Ä—ã—Ö —Å–ª—É—á–∞–µ–≤

```tsx
// 1) nullable
const [selectedId, setSelectedId] = useState<string | null>(null);

// 2) –º–∞—Å—Å–∏–≤ –±–µ–∑ never[]
type Item = { id: string };
const [items, setItems] = useState<Item[]>([]);

// 3) union —Ç–∏–ø–æ–≤
type Mode = "view" | "edit";
const [mode, setMode] = useState<Mode>("view");
```

---

## 4) –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Vue (–∞–Ω–∞–ª–æ–≥–∏–∏ –∏ –æ—Ç–ª–∏—á–∏—è)

| –¢–µ–º–∞                       | React `useState`                                       | Vue `ref` / `reactive`                                                        |
| -------------------------- | ------------------------------------------------------ | ----------------------------------------------------------------------------- |
| –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è              | –Ø–≤–Ω—ã–π —Å–µ—Ç—Ç–µ—Ä `setValue` —Å–æ–æ–±—â–∞–µ—Ç React –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏    | –ü—Ä–æ–∫—Å–∏ –¥–µ–ª–∞–µ—Ç –º—É—Ç–∞—Ü–∏—é ¬´—Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–π¬ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏                              |
| –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ  | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–ø–¥–µ–π—Ç–µ—Ä: `set(v => v + 1)`             | –ú–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ `count.value++`                                                  |
| –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å            | **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**: –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã/–º–∞—Å—Å–∏–≤—ã                 | –ú–æ–∂–Ω–æ –º—É—Ç–∏—Ä–æ–≤–∞—Ç—å (`reactive`/`ref`) ‚Äî Vue —Å–∞–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç                     |
| –ë–∞—Ç—á–∏—Ä–æ–≤–∞–Ω–∏–µ               | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ (React 18+)                             | –ï—Å—Ç—å `nextTick`, –±–∞—Ç—á–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ü–∏–∫–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Vue                        |
| –°—Ç–∞ÃÅ–ª—ã–µ –∑–∞–º—ã–∫–∞–Ω–∏—è           | –ê–∫—Ç—É–∞–ª—å–Ω–æ (JS –∑–∞–º—ã–∫–∞–Ω–∏—è), –ª–µ—á–∏—Ç—Å—è –∞–ø–¥–µ–π—Ç–µ—Ä–æ–º/—ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ | –ú–µ–Ω—å—à–µ –æ—Å—Ç—Ä—ã—Ö —É–≥–ª–æ–≤ –∏–∑-–∑–∞ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –Ω–æ –ø—Ä–∏ –∑–∞–º—ã–∫–∞–Ω–∏—è—Ö ‚Äî —Ç–µ –∂–µ –∑–∞–∫–æ–Ω—ã JS   |
| –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è            | –°–º–µ–Ω–∞ `key` —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –∏–Ω—Å—Ç–∞–Ω—Å                      | –¢–æ –∂–µ ‚Äî `:key` –≤ —à–∞–±–ª–æ–Ω–µ                                                      |
| –°–ª–æ–∂–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è          | `useReducer`, –∫–æ–Ω—Ç–µ–∫—Å—Ç, –≤–Ω–µ—à–Ω–∏–µ —Å—Ç–µ–π—Ç—ã (Zustand/Redux) | `reactive` + –∫–æ–º–ø–æ–∑–∏—Ü–∏—è, Pinia/Vuex                                           |
| ¬´–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å props –≤ state¬ª | –ê–Ω—Ç–∏‚Äë–ø–∞—Ç—Ç–µ—Ä–Ω (–∫—Ä–æ–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–≥–æ —Å–Ω–∞–ø—à–æ—Ç–∞)           | –¢–æ—á–Ω–æ —Ç–∞–∫ –∂–µ ‚Äî –ª—É—á—à–µ –≤—ã—á–∏—Å–ª—è—Ç—å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `v-model`/–ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ |

–ú–∏–Ω–∏‚Äë–ø—Ä–∏–º–µ—Ä Vue (—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç —Å—á—ë—Ç—á–∏–∫–∞):

```vue
<script setup lang="ts">
import { ref } from "vue";
const count = ref(0);
const inc3 = () => {
	count.value++;
	count.value++;
	count.value++;
};
</script>

<template>
	<p>Count: {{ count }}</p>
	<button @click="count++">+1</button>
	<button @click="inc3">+3</button>
	<button @click="count = 0">Reset</button>
</template>
```

---

## 5) –ß–∏—Ç‚Äë—à–∏—Ç (—Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è)

| –ß—Ç–æ                               | –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ                         | –ü—Ä–∏–º–µ—Ä                                 | –ù—é–∞–Ω—Å/–ø–æ—á–µ–º—É                                                    |
| --------------------------------- | ------------------------------------- | -------------------------------------- | --------------------------------------------------------------- |
| –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ             | `[value, setValue] = useState(init)`  | `const [n, setN] = useState(0)`        | `setN` –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ä–µ—Ä–µ–Ω–¥–µ—Ä, –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–º–∏—Å                 |
| –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ        | –ò—Å–ø–æ–ª—å–∑—É–π **—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–ø–¥–µ–π—Ç–µ—Ä** | `setN(p => p + 1)`                     | –ò–∑–±–µ–≥–∞–µ—Ç stale‚Äëclosure –∏ –ø—Ä–æ–±–ª–µ–º —Å –±–∞—Ç—á–∏—Ä–æ–≤–∞–Ω–∏–µ–º                |
| –õ–µ–Ω–∏–≤—ã–π –∏–Ω–∏—Ç                      | –ü–µ—Ä–µ–¥–∞–π —Ñ—É–Ω–∫—Ü–∏—é                       | `useState(() => heavy())`              | –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏                            |
| –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å                   | –°–æ–∑–¥–∞–≤–∞–π –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã/–º–∞—Å—Å–∏–≤—ã        | `setUser(p => ({ ...p, name }))`       | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ `Object.is`, –Ω–æ–≤–∞—è —Å—Å—ã–ª–∫–∞ –Ω—É–∂–Ω–∞                    |
| –ù–µ—Å–∫–æ–ª—å–∫–æ –∞–ø–¥–µ–π—Ç–æ–≤                | –ú–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –ø–æ–¥—Ä—è–¥                 | —Ç—Ä–∏ —Ä–∞–∑–∞ `setN(p => p + 1)`            | –í React 18+ –±–∞—Ç—á–∏—Ä—É—é—Ç—Å—è –≤ –æ–¥–∏–Ω —Ä–µ—Ä–µ–Ω–¥–µ—Ä                         |
| –ß—Ç–µ–Ω–∏–µ –ø–æ—Å–ª–µ `setState`           | –ù–µ –æ–∂–∏–¥–∞–π –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ä–∞–∑—É        | `setN(n+1); console.log(n); // —Å—Ç–∞—Ä–æ–µ` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ, —Å–º–æ—Ç—Ä–∏–º –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–µ–Ω–¥–µ—Ä–µ/`useEffect` |
| –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è                   | –ü–æ–º–µ–Ω—è–π `key` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞              | `<Form key={userId} />`                | –ù–æ–≤—ã–π –∏–Ω—Å—Ç–∞–Ω—Å ‚Üí –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ                                 |
| –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å props –≤ state          | –ò–∑–±–µ–≥–∞–π                               | ‚Äî                                      | –ê–Ω—Ç–∏‚Äë–ø–∞—Ç—Ç–µ—Ä–Ω: —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω –∏ –ª–∏—à–Ω–∏–µ —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã                     |
| –¢–∏–ø–∏–∑–∞—Ü–∏—è –ø—É—Å—Ç—ã—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π        | –ó–∞–¥–∞–≤–∞–π —Ç–∏–ø —è–≤–Ω–æ                      | `useState<Item[]>([])`                 | –ò–Ω–∞—á–µ `never[]`/`any[]`                                         |
| –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ —Å–æ–±—ã—Ç–∏—é             | –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö/—ç—Ñ—Ñ–µ–∫—Ç–∞—Ö               | `onClick={() => setN(p => p + 1)}`     | –ù–µ–ª—å–∑—è –≤—ã–∑—ã–≤–∞—Ç—å `setState` –≤ —Å–∞–º–æ–º —Ä–µ–Ω–¥–µ—Ä–µ –±–µ–∑ —É—Å–ª–æ–≤–∏–π          |
| –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–¥–µ–ª–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ | –ò—Å–ø–æ–ª—å–∑—É–π `useEffect`                 | `useEffect(()=>{ doSide(); }, [n])`    | –£ `setState` –Ω–µ—Ç –∫–æ–ª–±—ç–∫–∞                                        |
| –ó–∞—â–∏—Ç–∞ –æ—Ç —É—Ç–µ—á–µ–∫ –ø—Ä–∏ async        | –û—Ç–º–µ–Ω–∞/cleanup                        | `AbortController` –≤ `useEffect`        | –ò–∑–±–µ–≥–∞–µ–º `setState` –ø–æ—Å–ª–µ –∞–Ω–º–∞—É–Ω—Ç–∞                              |

---
