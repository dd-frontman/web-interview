# üîπ –•—É–∫ `useState`

## 1) –ö—Ä–∞—Ç–∫–æ, –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏

`useState` ‚Äî —ç—Ç–æ —Ö—É–∫ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è **–ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è** –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.  
–û–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∏–∑ –¥–≤—É—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤:

1. **—Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ state**,
2. **—Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**.

–ö–æ–≥–¥–∞ –º—ã –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, React –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –Ω–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º.

---

## 2) –ü–æ–¥—Ä–æ–±–Ω–æ —Å —Ç–µ–æ—Ä–∏–µ–π –∏ –Ω—é–∞–Ω—Å–∞–º–∏

### –û—Å–Ω–æ–≤—ã

```tsx
const [count, setCount] = useState(0);
```

- `count` ‚Äî —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–∑–¥–µ—Å—å —á–∏—Å–ª–æ).
- `setCount` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∏–∑–º–µ–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ.
- `0` ‚Äî –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

- –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Ä–µ–Ω–¥–µ—Ä–∞–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
- –í—ã–∑–æ–≤ `setCount(newValue)` –ø–ª–∞–Ω–∏—Ä—É–µ—Ç **–ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫—É**.
- React —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ —Å—Ç–∞—Ä—ã–º —á–µ—Ä–µ–∑ `Object.is`. –ï—Å–ª–∏ ¬´—Ä–∞–≤–Ω—ã¬ª ‚Üí —Ä–µ–Ω–¥–µ—Ä–∞ –Ω–µ –±—É–¥–µ—Ç.

### –ù—é–∞–Ω—Å—ã

- –í—ã–∑—ã–≤–∞—Ç—å `useState` –º–æ–∂–Ω–æ **—Ç–æ–ª—å–∫–æ –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞** (–Ω–µ –≤ if/for/while).
- –ù–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–µ–π: `useState(() => heavyCompute())` ‚Äî –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑.
- –ï—Å–ª–∏ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç–∞—Ä–æ–≥–æ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–ø–¥–µ–π—Ç–µ—Ä:
  ```tsx
  setCount((prev) => prev + 1);
  ```
- –ù–µ –º—É—Ç–∏—Ä—É–π—Ç–µ –æ–±—ä–µ–∫—Ç—ã/–º–∞—Å—Å–∏–≤—ã –Ω–∞–ø—Ä—è–º—É—é:
  ```tsx
  // ‚ùå –ø–ª–æ—Ö–æ
  user.name = "Bob";
  setUser(user);
  // ‚úÖ —Ö–æ—Ä–æ—à–æ
  setUser((prev) => ({ ...prev, name: "Bob" }));
  ```
- –í React 18 –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ **–±–∞—Ç—á–∞—Ç—Å—è** (–Ω–µ—Å–∫–æ–ª—å–∫–æ setState –≤ –æ–¥–Ω–æ–º —Ç–∏–∫–µ ‚Üí –æ–¥–∏–Ω —Ä–µ—Ä–µ–Ω–¥–µ—Ä).
- `setState` **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–µ–Ω**: —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –µ—â—ë —Å—Ç–∞—Ä–æ–µ, –Ω–æ–≤–æ–µ –±—É–¥–µ—Ç –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–µ–Ω–¥–µ—Ä–µ.

### –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

1. **–°—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ setState**  
   –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–ø–¥–µ–π—Ç–µ—Ä.
2. **–°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `key` —É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
3. **–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã**: –≤—ã–∑–æ–≤ `setState` –ø—Ä—è–º–æ –≤ —Ç–µ–ª–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
4. **–¢–∏–ø–∏–∑–∞—Ü–∏—è –≤ TS**: –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –±–µ–∑ —Ç–∏–ø–∞ ‚Üí `never[]`. –ù—É–∂–Ω–æ `useState<Item[]>([])`.

---

## 3) –ü—Ä–∏–º–µ—Ä—ã (React + TypeScript)

### 3.1. –°—á—ë—Ç—á–∏–∫

```tsx
import { useState } from "react";

export function Counter() {
	const [count, setCount] = useState<number>(0);

	return (
		<div>
			<p>–°—á—ë—Ç—á–∏–∫: {count}</p>
			<button onClick={() => setCount((p) => p + 1)}>+1</button>
			<button onClick={() => setCount(0)}>–°–±—Ä–æ—Å</button>
		</div>
	);
}
```

### 3.2. –û–±—ä–µ–∫—Ç –≤ state

```tsx
type User = { id: string; name: string };

export function Profile() {
	const [user, setUser] = useState<User>({ id: "1", name: "Alice" });

	return (
		<div>
			<p>{user.name}</p>
			<button onClick={() => setUser((prev) => ({ ...prev, name: "Bob" }))}>–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å</button>
		</div>
	);
}
```

### 3.3. –ú–∞—Å—Å–∏–≤ –≤ state

```tsx
type Todo = { id: string; text: string };

export function TodoList() {
	const [todos, setTodos] = useState<Todo[]>([]);

	const add = (text: string) => setTodos((prev) => [...prev, { id: crypto.randomUUID(), text }]);

	return (
		<div>
			<button onClick={() => add("–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞")}>–î–æ–±–∞–≤–∏—Ç—å</button>
			<ul>
				{todos.map((t) => (
					<li key={t.id}>{t.text}</li>
				))}
			</ul>
		</div>
	);
}
```

---

## 4) –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Vue

| React                                             | Vue                                                       |
| ------------------------------------------------- | --------------------------------------------------------- |
| `useState(0)` ‚Üí `[value, setValue]`               | `ref(0)` ‚Üí `.value`                                       |
| –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `setValue(newValue)`             | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é: `value.value++`                      |
| –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ (–Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç/–º–∞—Å—Å–∏–≤) | –ú–æ–∂–Ω–æ –º—É—Ç–∏—Ä–æ–≤–∞—Ç—å (`reactive`/`ref` —Å–ª–µ–¥—è—Ç –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏) |
| –ù–µ—Å–∫–æ–ª—å–∫–æ –∞–ø–¥–µ–π—Ç–æ–≤ –±–∞—Ç—á–∞—Ç—Å—è (React 18+)           | Vue –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±–∞—Ç—á–∞–º–∏ —á–µ—Ä–µ–∑ `nextTick`       |
| –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `key`        | –¢–æ –∂–µ —Å–∞–º–æ–µ: `:key` —É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ     |

---

## 5) –ß–∏—Ç-—â–∏—Ç (—Ç–∞–±–ª–∏—Ü–∞)

| –ß—Ç–æ                         | –ö–∞–∫                              | –ü—Ä–∏–º–µ—Ä                            | –ù—é–∞–Ω—Å                               |
| --------------------------- | -------------------------------- | --------------------------------- | ----------------------------------- |
| –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ       | `[val, setVal] = useState(init)` | `const [n, setN] = useState(0)`   | setN –≤—ã–∑—ã–≤–∞–µ—Ç —Ä–µ—Ä–µ–Ω–¥–µ—Ä              |
| –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Å—Ç–∞—Ä–æ–≥–æ      | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–ø–¥–µ–π—Ç–µ—Ä          | `setN(p => p + 1)`                | –ò–∑–±–µ–≥–∞–µ—Ç stale closure              |
| –õ–µ–Ω–∏–≤—ã–π init                | –ü–µ—Ä–µ–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é                 | `useState(() => heavyCalc())`     | –í—ã–ø–æ–ª–Ω–∏—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑                 |
| –û–±—ä–µ–∫—Ç/–º–∞—Å—Å–∏–≤               | –°–æ–∑–¥–∞—ë–º –∫–æ–ø–∏—é                    | `setArr(p => [...p, x])`          | –ù–µ –º—É—Ç–∏—Ä—É–µ–º –Ω–∞–ø—Ä—è–º—É—é                |
| –ù–µ—Å–∫–æ–ª—å–∫–æ –≤—ã–∑–æ–≤–æ–≤           | –ë–∞—Ç—á–∞—Ç—Å—è –≤ –æ–¥–∏–Ω —Ä–µ—Ä–µ–Ω–¥–µ—Ä         | `setN(p => p+1); setN(p => p+1);` | React 18+                           |
| –ß—Ç–µ–Ω–∏–µ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ setState | –°—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ                  | `console.log(n)`                  | –ù–æ–≤–æ–µ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∞ |
| Reset state                 | –°–º–µ–Ω–∞ `key`                      | `<Comp key={id}/>`                | –ù–æ–≤—ã–π –∏–Ω—Å—Ç–∞–Ω—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞            |
| –¢–∏–ø–∏–∑–∞—Ü–∏—è                   | –£–∫–∞–∑—ã–≤–∞–µ–º —è–≤–Ω–æ                   | `useState<Item[]>([])`            | –ò–Ω–∞—á–µ –±—É–¥–µ—Ç `never[]`               |

---

---

> [!tip] –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã
>
> - [–û—Å–Ω–æ–≤–Ω—ã–µ —Ö—É–∫–∏ –≤ React](/react/khuki/osnovnye-khuki-v-react)
> - [useContext](/react/khuki/usecontext)
> - [useEffect](/react/khuki/useeffect)

