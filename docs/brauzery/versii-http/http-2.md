---
title: "HTTP/2 мультиплексирование бинарный"
description: "Подробно про HTTP/2: как устроены streams, мультиплексирование, HPACK и какие ограничения остаются из-за TCP."
tags:
  - "brauzery"
  - "http-2"
updatedAt: "2026-02-17"
---
# HTTP/2

**HTTP/2** (RFC 9113) появился как ответ на ограничения HTTP/1.1: много соединений, очереди запросов и лишние накладные расходы.

Главная идея: не открывать много TCP-соединений, а эффективно использовать одно.

## Что изменилось в HTTP/2

### 1. Бинарный протокол

HTTP/1.1 текстовый, HTTP/2 передаёт данные бинарными фреймами. Это проще и быстрее для парсинга на стороне клиента и сервера.

### 2. Streams и мультиплексирование

В одном TCP-соединении можно вести несколько логических потоков (`stream`) параллельно.

Что это даёт:

- браузер не ждёт завершения одного ресурса, чтобы запросить следующий;
- уменьшается потребность в domain sharding.

### 3. Сжатие заголовков (HPACK)

Повторяющиеся заголовки (`cookie`, `user-agent`, `accept`) не гоняются в полном виде каждый раз, что снижает трафик.

### 4. Приоритизация

Клиент может сообщать приоритеты потоков (что отдать раньше: CSS, шрифты, картинки).

## Что важно понимать про ограничения HTTP/2

HTTP/2 всё ещё работает поверх **TCP**.

Это значит:

- если теряется TCP-пакет, задержка может повлиять на все потоки внутри соединения;
- полностью проблема head-of-line исчезает только в HTTP/3 (QUIC).

## Практика: как включить HTTP/2

Обычно HTTP/2 включают на TLS-терминации (Nginx/Caddy/CDN).

```nginx
server {
  listen 443 ssl http2;
  server_name example.com;

  ssl_protocols TLSv1.2 TLSv1.3;
  # ...
}
```

Проверка в браузере:

1. DevTools -> Network.
2. Добавить колонку `Protocol`.
3. Убедиться, что запросы идут как `h2`.

## Когда выбирать HTTP/2

- дефолтный выбор для большинства веб-приложений;
- особенно полезен при большом количестве мелких ресурсов;
- хорошая совместимость и зрелая инфраструктурная поддержка.

## Официальные источники

- [MDN: HTTP/2](https://developer.mozilla.org/en-US/docs/Web/HTTP/2)
- [RFC 9113: HTTP/2](https://www.rfc-editor.org/rfc/rfc9113)
- [MDN: Evolution of HTTP](https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/Evolution_of_HTTP)

---

<RelatedTopics
	:items="[
		{ title: 'HTTP/1.1: как работает и где упирается', href: '/brauzery/versii-http/http-1-1' },
		{ title: 'HTTP/3: QUIC и современный транспорт', href: '/brauzery/versii-http/http-3' },
		{ title: 'Сравнение HTTP/1.1, HTTP/2 и HTTP/3', href: '/brauzery/versii-http/sravnenie-http-versii' },
	]"
/>
