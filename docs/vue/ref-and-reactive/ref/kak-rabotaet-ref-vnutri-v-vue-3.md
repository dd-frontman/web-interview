**`ref` โ ััะพ ัะฟะพัะพะฑ ัะพะทะดะฐัั _ัะตะฐะบัะธะฒะฝะพะต ะทะฝะฐัะตะฝะธะต_.**  
ะะฝ ะฝัะถะตะฝ, ะบะพะณะดะฐ ัั ัะพัะตัั, ััะพะฑั ะฟัะพัััะต ะดะฐะฝะฝัะต (ัะธัะปะพ, ัััะพะบะฐ, ะฑัะปะตะฒะพ) ะธะปะธ ะดะฐะถะต ะพะฑัะตะบั ััะฐะปะธ ะพััะปะตะถะธะฒะฐะตะผัะผะธ Vue ะธ ะพะฑะฝะพะฒะปัะปะธ UI ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ. [Vue.js](https://vuejs.org/guide/essentials/reactivity-fundamentals.html)

---

## ๐๏ธ ะกัะตะผะฐ ยซะฟะพะด ะบะฐะฟะพัะพะผยป โ ัะฐะณะธ ะธ ะบะพะผะฟะพะฝะตะฝัั

ะะพั **ััััะบัััะฐ ะธ ััะตะผะฐ** ัะพะณะพ, ััะพ ะฟัะพะธััะพะดะธั ะฟะพะด ะบะฐะฟะพัะพะผ ะฟัะธ ัะพะทะดะฐะฝะธะธ `ref(value)`:

---

```PERL
 โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
 โ               ref(value)              โ
 โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                    โ
                    โผ
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  โ     ัะพะทะดะฐัั ะพะฑัะตะบั-ะพะฑัััะบั (refObj)   โ
  โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
  โ   โ { value: ... }                โ   โ
  โ   โ  โ ะณะตััะตั/ัะตััะตั ะดะปั .value   โ   โ
  โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
  โ                 โ                     โ
  โ                 โผ                     โ
  โ   ัะฟะตัะธะฐะปัะฝัะน ะผะตัะฐะฝะธะทะผ ััะตะบะธะฝะณะฐ ะธ     โ
  โ   ัะฒะตะดะพะผะปะตะฝะธะน (track/trigger)         โ
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                    โ
        โโโโโโโโโโโโโดโโโโโโโโโโโโ
        โผ                       โผ
โโโโโโโโโโโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะพััะปะตะถะธะฒะฐะฝะธะต     โ   โ ัะฒะตะดะพะผะปะตะฝะธะต ะฟะพะดะฟะธััะธะบะพะฒ  โ
โ ััะตะฝะธั `.value`  โ   โ ะฟัะธ ะทะฐะฟะธัะธ `.value = ...`โ
โ (track)          โ   โ (trigger)                โ
โโโโโโโโโโโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโ

```

๐ ะัะปะธ `ref` ัะพะดะตัะถะธั ะพะฑัะตะบั, ัะพ **ะฒะฝัััะธ Vue ะฒัะทัะฒะฐะตั `reactive()` ะฝะฐ ััะพะผ ะพะฑัะตะบัะต**, ััะพะฑั ัะดะตะปะฐัั ะตะณะพ ะณะปัะฑะพะบะธะผ ะธ ัะตะฐะบัะธะฒะฝัะผ ัะพะถะต (auto-unwrap). [GitHub](https://github.com/vuejs/vue-next/issues/2018)

---

## ๐ ะงัะพ ะดะตะปะฐะตั ะณะตััะตั/ัะตััะตั

ะะพะณะดะฐ ัั ะฟะธัะตัั:

`const count = ref(0); console.log(count.value);`

Vue ัะฐะบัะธัะตัะบะธ ะฒัะทัะฒะฐะตั:

- **ะณะตััะตั `.value`** โ ะฒัะทัะฒะฐะตั `track(refObj, 'value')` โ ัะธััะตะผะฐ **ะพััะปะตะถะธะฒะฐะตั ะทะฐะฒะธัะธะผะพััั**
- ะะฐัะตะผ, ะบะพะณะดะฐ ัั ะผะตะฝัะตัั:

`count.value++;`

ะกัะฐะฑะพัะฐะตั **ัะตััะตั `.value`** โ Vue ะฒัะทัะฒะฐะตั `trigger(refObj, 'value')` โ **ะพะฟะพะฒะตัะฐะตั ะฒัั ัะธััะตะผั**, ััะพ ััะพ ะทะฝะฐัะตะฝะธะต ะธะทะผะตะฝะธะปะพัั. [Vue.js](https://vuejs.org/api/reactivity-core)

---

## ๐ฆ ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั ะฒะฝัััะธ ั ะพะฑัะตะบัะฐะผะธ

ะัะปะธ ัั ะฟะตัะตะดะฐััั ะพะฑัะตะบั ะฒ `ref`:

`const user = ref({ name: 'Alice' });`

ะขะพ ะฟะพะด ะบะฐะฟะพัะพะผ Vue ะดะตะปะฐะตั ะฟัะธะผะตัะฝะพ ัะฐะบ:

`ref({ โฆ })   โ value โ reactive({ โฆ })`

ะขะพ ะตััั ะพะฑัะตะบั ะฒะฝัััะธ `.value` **ะพะฑะพัะฐัะธะฒะฐะตััั ะฒ Proxy**, ัะฐะบะพะน ะถะต ะบะฐะบ ั `reactive()`, ะธ **ะฒะปะพะถะตะฝะฝัะต ะฟะพะปั ัะพะถะต ััะฐะฝะพะฒัััั ัะตะฐะบัะธะฒะฝัะผะธ**. [GitHub](https://github.com/vuejs/vue-next/issues/2018)

---

## ๐ ะะพัะตะผั `.value` ะพะฑัะทะฐัะตะปะตะฝ

ะะพัะพะผั ััะพ JavaScript **Proxy ัะฐะฑะพัะฐะตั ัะพะปัะบะพ ั ะพะฑัะตะบัะฐะผะธ** โ ะฝะตะปัะทั ะฝะฐะฟััะผัั ัะดะตะปะฐัั ัะตะฐะบัะธะฒะฝัะผ ะฟัะธะผะธัะธะฒ (ัะธัะปะพ/ัััะพะบั/ะฑัะปะตะฒะพ). Vue **ะพะฑะพัะฐัะธะฒะฐะตั ััะพั ะฟัะธะผะธัะธะฒ ะฒ ะพะฑัะตะบั ั `.value`** ะธ ะดะตะปะฐะตั ะณะตััะตั/ัะตััะตั ัะตัะตะท ัะตัะตัะตะฝัะธั. [Vue.js](https://vuejs.org/api/reactivity-core)

---

## ๐ง ะะฐะบ `ref` ะฒะทะฐะธะผะพะดะตะนััะฒัะตั ั ัะตะฐะบัะธะฒะฝะพะน ัะธััะตะผะพะน

Vue ะฟะพะดะดะตัะถะธะฒะฐะตั ัะปะตะดัััะธะต ะผะตัะฐะฝะธะทะผั ะฟะพะด ะบะฐะฟะพัะพะผ:

### ๐งฉ Track / Trigger

ะญัะพ ะณะปะฐะฒะฝัะน ะฒะฝัััะตะฝะฝะธะน ะผะตัะฐะฝะธะทะผ ัะตะฐะบัะธะฒะฝะพััะธ (ะดะพัััะฟะตะฝ ะฝะต ัะพะปัะบะพ ะดะปั ref, ะฝะพ ะธ ะดะปั reactive):

- **track(target, key)** โ ะบะพะณะดะฐ ัะธัะฐะตััั ะทะฝะฐัะตะฝะธะต
- **trigger(target, key)** โ ะบะพะณะดะฐ ะทะฝะฐัะตะฝะธะต ะธะทะผะตะฝัะตััั

Vue ััะฐะฝะธั ะทะฐะฒะธัะธะผัะต _ัััะตะบัั_ (ัะตะฝะดะตั, computed, watch) ะฒ ะบะฐััะต ะทะฐะฒะธัะธะผะพััะตะน (`targetMap`), ะฐััะพัะธะธััั ะธั ั ะพะฑัะตะบัะพะผ ะธ ะบะปััะพะผ. ะะพะณะดะฐ ััะฐะฑะฐััะฒะฐะตั trigger โ Vue ะทะฝะฐะตั _ะบะฐะบะธะต ัััะตะบัั ะฟะตัะตะทะฐะฟัััะธัั_. [This Dot Labs](https://www.thisdot.co/blog/understanding-vues-reactive-data)

---

## ๐ ะกัะตะผะฐ ะทะฐะฒะธัะธะผะพััะตะน Vue 3

```JS
 refObj     reactiveObj
   โ             โ
   โผ             โผ
track()    ---- track() ----
   โ             โ
store in targetMap (WeakMap of deps)
   โ             โ
trigger()  ---- trigger() ----
   โ             โ
re-run effects / ะฟะตัะตัะตะฝะดะตัั

```

## ๐ค ะัะธะผะตัั ะฟะพะด ะบะฐะฟะพัะพะผ (ัะฟัะพััะฝะฝัะต)

### ะฃะฟัะพััะฝะฝัะน ะฟัะตะฒะดะพะบะพะด `ref`

```JS
function ref(initialValue) {
  let value = initialValue

  return {
    get value() {
      track(this, 'value') // ัะตะณะธัััะธััะตั ะทะฐะฒะธัะธะผะพััั
      return value
    },
    set value(newVal) {
      value = newVal
      trigger(this, 'value') // ะพะฟะพะฒะตัะฐะตั
    }
  }
}

```

ะญัะพ **ะฝะต ะฟะพะปะฝัะน ะธััะพะดะฝะธะบ Vue**, ะฐ ัะฟัะพััะฝะฝะฐั ััะตะผะฐ, ะฝะพ ะพะฝะฐ ะพััะฐะถะฐะตั ัััั:  
โช ะณะตััะตั/ัะตััะตั โ ััะพ **ัะพัะบะธ ะฒัะพะดะฐ ะฒ ัะธััะตะผั ะพััะปะตะถะธะฒะฐะฝะธั**. [Michael Hoffmann](https://mokkapps.de/blog/ref-vs-reactive-what-to-choose-using-vue-3-composition-api)

---

## ๐ ะงัะพ ะธะผะตะฝะฝะพ ะดะตะปะฐะตั Vue

๐ ะัะปะธ `.value` โ ะฟัะธะผะธัะธะฒ โ ะธัะฟะพะปัะทัะตััั ัะพะปัะบะพ ะณะตััะตั/ัะตััะตั ะดะปั ะพััะปะตะถะธะฒะฐะฝะธั.  
๐ ะัะปะธ `.value` โ ะพะฑัะตะบั โ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะธัะฟะพะปัะทัะตั `reactive()` โ ัะธัััะน Proxy ั ะณะปัะฑะพะบะธะผ ััะตะบะธะฝะณะพะผ ะธะทะผะตะฝะตะฝะธะน. [GitHub](https://github.com/vuejs/vue-next/issues/2018)  
๐ ะะพะณะดะฐ ัะฐะฑะปะพะฝ/ัััะตะบั ัะธัะฐะตั `ref.value`, Vue _ะณะดะต-ัะพ ััะฐะฝะธั ะฐะบัะธะฒะฝัะน ัััะตะบั_, ััะพะฑั ะทะฝะฐัั, ััะพ ะฝัะถะฝะพ ะฟะตัะตะทะฐะฟัััะธัั ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ. [This Dot Labs](https://www.thisdot.co/blog/understanding-vues-reactive-data)  
๐ Vue ะฐะฒัะพะผะฐัะธัะตัะบะธ โก _unwrapโะธั_ (`.value`) ะฒ ัะฐะฑะปะพะฝะต, ััะพะฑั ัะตะฑะต ะฝะต ะฟะธัะฐัั `.value` ะฒ ัะฐะฑะปะพะฝะต. [PurpleSchool](https://purpleschool.ru/knowledge-base/article/ref)

---

## ๐ง ะะพัะตะผั ะฒัั ััะพ ะฒะฐะถะฝะพ

โ `ref` ะดะฐัั **ัะตะฐะบัะธะฒะฝะพััั ะตะดะธะฝะธัะฝัั ะทะฝะฐัะตะฝะธะน**  
โ `.value` โ ะธะฝัะตััะตะนั, ะบะพัะพััะน ะฟะพะทะฒะพะปัะตั Vue ะพััะปะตะถะธะฒะฐัั ะธะทะผะตะฝะตะฝะธั  
โ ะะฑัะตะบัั ะฒ `ref` ััะฐะฝะพะฒัััั ะณะปัะฑะพะบะธะผะธ ะฐะฒัะพะผะฐัะธัะตัะบะธ  
โ Vue ัะผะตะตั **ะพะฟัะธะผะฐะปัะฝะพ ะฟะตัะตัััะฐะธะฒะฐัั UI**, ััะธะณะณะตัั ะทะฐะฒะธััั ัะพะปัะบะพ ะพั ัะพะณะพ, ััะพ ัะตะฐะปัะฝะพ ะธัะฟะพะปัะทัะตััั

---

## ๐ ะัะพะณะฝะฐั ััะตะผะฐ (ะบัะฐัะบะฐั)

```PERL
ref(value)
  โโโ ะพะฑัััะบะฐ ั .value
  โโโ ะณะตััะตั โ track
  โโโ ัะตััะตั โ trigger
  โโโ ะตัะปะธ ะทะฝะฐัะตะฝะธะต โ ะพะฑัะตะบั โ ะฒัะทัะฒะฐะตััั reactive()
                     โโโ Proxy ะดะปั ะณะปัะฑะพะบะพะณะพ ััะตะบะธะฝะณะฐ

```
