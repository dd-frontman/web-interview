**Scheduler (Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‰Ð¸Ðº)** â€” ÑÑ‚Ð¾ Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ð¹ Ð¼ÐµÑ…Ð°Ð½Ð¸Ð·Ð¼ **Vue.js**, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ñ€ÐµÑˆÐ°ÐµÑ‚:

> **ÐºÐ¾Ð³Ð´Ð° Ð¸Ð¼ÐµÐ½Ð½Ð¾ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑ‚ÑŒ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ñ€ÐµÐ°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸ Ð¿ÐµÑ€ÐµÑ€Ð¸ÑÐ¾Ð²ÐºÑƒ DOM**,  
> **Ð¸ Ð² ÐºÐ°ÐºÐ¾Ð¼ Ð¿Ð¾Ñ€ÑÐ´ÐºÐµ**, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ ÑÑ‚Ð¾ **Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾ ÑÑ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ð¾**.

Ð•ÑÐ»Ð¸ ÑÐ¾Ð²ÑÐµÐ¼ Ð¿Ñ€Ð¾ÑÑ‚Ð¾:

ðŸ‘‰ **Scheduler â€” ÑÑ‚Ð¾ Â«Ð¾Ñ‡ÐµÑ€ÐµÐ´ÑŒ Ð·Ð°Ð´Ð°Ñ‡Â», ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ ÑÐ¾Ð±Ð¸Ñ€Ð°ÐµÑ‚ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ Ð¸Ñ… Ð¿Ð°Ñ‡ÐºÐ¾Ð¹, Ð° Ð½Ðµ ÑÑ€Ð°Ð·Ñƒ.**

---

## Ð—Ð°Ñ‡ÐµÐ¼ Ð²Ð¾Ð¾Ð±Ñ‰Ðµ Ð½ÑƒÐ¶ÐµÐ½ scheduler?

ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²ÑŒ ÐºÐ¾Ð´:

```js
count.value++;
count.value++;
count.value++;
```

Ð‘ÐµÐ· scheduler Vue Ð±Ñ‹:

- 3 Ñ€Ð°Ð·Ð° Ð¿ÐµÑ€ÐµÑÑ‡Ð¸Ñ‚Ð°Ð» Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ
- 3 Ñ€Ð°Ð·Ð° Ð¾Ð±Ð½Ð¾Ð²Ð¸Ð» DOM

âŒ Ð¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾ Ð¸ Ð½ÐµÑÑ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ð¾

Ð¡ **scheduler**:

- Vue **Ð·Ð°Ð¼ÐµÑ‡Ð°ÐµÑ‚ Ð²ÑÐµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ**
- **ÑÐºÐ»Ð°Ð´Ñ‹Ð²Ð°ÐµÑ‚ Ð¸Ñ… Ð² Ð¾Ñ‡ÐµÑ€ÐµÐ´ÑŒ**
- **Ð´ÐµÐ»Ð°ÐµÑ‚ Ð¾Ð´Ð½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ**

âœ… Ð±Ñ‹ÑÑ‚Ñ€Ð¾ Ð¸ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð¾

## Ð§Ñ‚Ð¾ Ð¸Ð¼ÐµÐ½Ð½Ð¾ Ð¿Ð»Ð°Ð½Ð¸Ñ€ÑƒÐµÑ‚ scheduler Ð² Vue 3

Scheduler ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚:

1. **effectâ€™Ð°Ð¼Ð¸** (Ñ€ÐµÐ°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸)
2. **Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸ÑÐ¼Ð¸ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð¾Ð²**
3. **watch / watchEffect**
4. **computed**
5. **DOM-Ð¿Ð°Ñ‚Ñ‡Ð¸Ð½Ð³Ð¾Ð¼**

Ð’ÑÐµ Ð¾Ð½Ð¸ **Ð½Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑŽÑ‚ÑÑ ÑÑ€Ð°Ð·Ñƒ**, Ð°:

- Ð¿Ð¾Ð¿Ð°Ð´Ð°ÑŽÑ‚ Ð² **Ð¾Ñ‡ÐµÑ€ÐµÐ´ÑŒ**
- Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑŽÑ‚ÑÑ **Ð² Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚**

---

## ÐšÐ°Ðº ÑÑ‚Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¿Ð¾ ÑˆÐ°Ð³Ð°Ð¼

### 1ï¸âƒ£ Ð˜Ð·Ð¼ÐµÐ½ÑÐµÑ‚ÑÑ Ñ€ÐµÐ°ÐºÑ‚Ð¸Ð²Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ

```js
state.count++;
```

### 2ï¸âƒ£ Vue ÐÐ• Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ ÑÑ€Ð°Ð·Ñƒ

Ð’Ð¼ÐµÑÑ‚Ð¾ ÑÑ‚Ð¾Ð³Ð¾:

- Ð¿Ð¾Ð¼ÐµÑ‡Ð°ÐµÑ‚ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ ÐºÐ°Ðº â€œÐ³Ñ€ÑÐ·Ð½Ñ‹Ðµâ€
- ÐºÐ»Ð°Ð´Ñ‘Ñ‚ Ð·Ð°Ð´Ð°Ñ‡Ð¸ Ð² **scheduler queue**

---

### 3ï¸âƒ£ Scheduler Ð¶Ð´Ñ‘Ñ‚ â€œÐ¿Ð¾Ð´Ñ…Ð¾Ð´ÑÑ‰Ð¸Ð¹ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚â€

ÐžÐ±Ñ‹Ñ‡Ð½Ð¾ ÑÑ‚Ð¾:

- **microtask** (Promise.then)
- Ð¾Ð´Ð¸Ð½ Ñ‚Ð¸Ðº event loop

---

### 4ï¸âƒ£ Scheduler Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ Ð¾Ñ‡ÐµÑ€ÐµÐ´ÑŒ (`flushJobs`)

- ÑƒÐ´Ð°Ð»ÑÐµÑ‚ Ð´ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚Ñ‹
- ÑÐ¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ Ð·Ð°Ð´Ð°Ñ‡Ð¸
- Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ Ð¸Ñ… **Ð¿Ð¾ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ñƒ**

---

### 5ï¸âƒ£ ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ÑÑ DOM ÐžÐ”Ð˜Ð Ñ€Ð°Ð·

---

## Ð’Ð°Ð¶Ð½Ñ‹Ð¹ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚: **Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ð¾ÑÑ‚ÑŒ**

Scheduler Ð´ÐµÐ»Ð°ÐµÑ‚ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ **Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ð¼Ð¸**.
ÐŸÐ¾ÑÑ‚Ð¾Ð¼Ñƒ:

```js
state.count++;
console.log(el.textContent); // âŒ ÑÑ‚Ð°Ñ€Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ
```

## DOM ÐµÑ‰Ñ‘ Ð½Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ð»ÑÑ.

## Ð”Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚ `nextTick`

```js
state.count++;
await nextTick();
console.log(el.textContent); // âœ… Ð½Ð¾Ð²Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ
```

`nextTick` â€” ÑÑ‚Ð¾:

> Â«Ð¿Ð¾Ð´Ð¾Ð¶Ð´Ð¸, Ð¿Ð¾ÐºÐ° scheduler Ð·Ð°ÐºÐ¾Ð½Ñ‡Ð¸Ñ‚ Ð²ÑÐµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸ÑÂ»

### Scheduler Ð¸ `watch`

```js
watch(source, callback, {
	flush: "pre" | "post" | "sync",
});
```

Ð­Ñ‚Ð¾ **Ð¿Ñ€ÑÐ¼Ð¾Ðµ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ schedulerâ€™Ð¾Ð¼**.

### `flush: 'pre'` (Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ)

- Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ **Ð´Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ DOM**

### `flush: 'post'`

- Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ **Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ DOM**
- Ð¿Ð¾Ð»ÐµÐ·Ð½Ð¾ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ DOM

### `flush: 'sync'`

- **Ð±ÐµÐ· scheduler**
- Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ ÑÑ€Ð°Ð·Ñƒ â—
- Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð¾ÑÑ‚Ð¾Ñ€Ð¾Ð¶Ð½Ð¾

## Scheduler Ð¸ computed

`computed`:

- **Ð½Ðµ Ð¿ÐµÑ€ÐµÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ÑÑ ÑÑ€Ð°Ð·Ñƒ**
- Ð¿Ð¾Ð¼ÐµÑ‡Ð°ÐµÑ‚ÑÑ ÐºÐ°Ðº `dirty`
- Ð¿ÐµÑ€ÐµÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ÑÑ **Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐºÐ¾Ð³Ð´Ð° Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾ Ð½ÑƒÐ¶ÐµÐ½**

Ð­Ñ‚Ð¾ Ñ‚Ð¾Ð¶Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð° schedulerâ€™Ð°.

## Scheduler Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð¾Ð²

ÐšÐ°Ð¶Ð´Ñ‹Ð¹ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚:

- Ð¸Ð¼ÐµÐµÑ‚ **update job**
- job ÐºÐ»Ð°Ð´Ñ‘Ñ‚ÑÑ Ð² Ð¾Ñ‡ÐµÑ€ÐµÐ´ÑŒ
- Vue Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€ÑƒÐµÑ‚:
  - Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ÑÑ **Ð´Ð¾** Ð¿Ð¾Ñ‚Ð¾Ð¼ÐºÐ°
  - Ð¾Ð´Ð¸Ð½ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ â€” **Ð¾Ð´Ð¸Ð½ Ð°Ð¿Ð´ÐµÐ¹Ñ‚ Ð·Ð° Ñ‚Ð¸Ðº**

## ÐšÐ»ÑŽÑ‡ÐµÐ²Ð°Ñ Ð¸Ð´ÐµÑ (Ð¾Ñ‡ÐµÐ½ÑŒ Ð²Ð°Ð¶Ð½Ð¾)

> **Vue 3 = Ñ€ÐµÐ°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ + scheduler**
> Ð‘ÐµÐ· scheduler:

- Ñ€ÐµÐ°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ Ð±Ñ‹Ð»Ð° Ð±Ñ‹ Ð¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾Ð¹
- DOM Ð´Ñ‘Ñ€Ð³Ð°Ð»ÑÑ Ð±Ñ‹ Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾

Scheduler Ð´ÐµÐ»Ð°ÐµÑ‚ Vue:

- Ð±Ñ‹ÑÑ‚Ñ€Ñ‹Ð¼
- Ð¿Ñ€ÐµÐ´ÑÐºÐ°Ð·ÑƒÐµÐ¼Ñ‹Ð¼
- Ð¼Ð°ÑÑˆÑ‚Ð°Ð±Ð¸Ñ€ÑƒÐµÐ¼Ñ‹Ð¼

---

## ÐšÐ¾Ñ€Ð¾Ñ‚ÐºÐ¾Ðµ Ñ€ÐµÐ·ÑŽÐ¼Ðµ

**Scheduler Ð² Vue 3:**

- â³ Ð¾Ñ‚ÐºÐ»Ð°Ð´Ñ‹Ð²Ð°ÐµÑ‚ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ
- ðŸ“¦ Ð¾Ð±ÑŠÐµÐ´Ð¸Ð½ÑÐµÑ‚ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ
- ðŸ” ÑƒÑÑ‚Ñ€Ð°Ð½ÑÐµÑ‚ Ð´ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ‚Ñ‹
- ðŸ§  ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð¿Ð¾Ñ€ÑÐ´ÐºÐ¾Ð¼ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ
- âš¡ ÑƒÑÐºÐ¾Ñ€ÑÐµÑ‚ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ

---

> [!tip] Ð¡Ð²ÑÐ·Ð°Ð½Ð½Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹
>
> - [ÐÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ðµ Ñ€ÐµÐ½Ð´ÐµÑ€Ñ‹ Ð¸ Ð±Ð°Ñ‚Ñ‡Ð¸Ð½Ð³](/vue/asinkhronnye-rendery-i-batching)
> - [defineExpose()](/vue/defineexpose)
> - [Ð”Ð¸Ñ€ÐµÐºÑ‚Ð¸Ð²Ñ‹ Vue](/vue/direktivy-vue)

